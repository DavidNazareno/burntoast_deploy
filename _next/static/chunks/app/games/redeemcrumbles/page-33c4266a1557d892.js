(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[949],{9391:function(){},7330:function(t,e,r){Promise.resolve().then(r.bind(r,5175))},5175:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return g}});var a=r(8754),n=r(2123),s=r(397),o=r.n(s),u=r(7275),i=r.n(u),c=r(511),l=r(1522),_=r(4712),d=r(4295);let h=async t=>{let e=(0,d.e)(),{data:r,error:a}=await e.from("burn_toast_scores").select("*").eq("address",t);if(null!=a)throw Error(a.message);let n=r.length>0?r[0]:{address:"",cant:0,last_burn_at:""};if(""!==n.last_burn_at){let t=await fetch("https://worldtimeapi.org/api/ip"),{unixtime:e}=await t.json(),r=new Date(new Date(1e3*e));if(r.setDate(r.getDate()-1),new Date(n.last_burn_at)>r)return{...n,isBurned:!0}}return{...n,isBurned:!1}},p=async t=>{let e=(0,d.e)(),{error:r}=await e.from("burn_toast_scores").insert([t]);if(null!=r)throw Error(r.message)},f=async t=>{let e=(0,d.e)(),{error:r}=await e.from("burn_toast_scores").update(t).match({address:t.address});if(null!=r)throw Error(r.message)};var m=r(4284),b=r(4625),w=r(5987),x=(t,e,r)=>{(0,n.useEffect)(()=>{let r=setTimeout(()=>{t()},e);return()=>{clearTimeout(r)}},r)},y=r(1786),g=()=>{(0,c.Z)();let[t,e]=(0,n.useState)({address:"",cant:0,last_burn_at:"",isBurned:!1}),{play:r}=(0,w.Z)("https://assets.codepen.io/605876/kids-cheering.mp3"),[s,u]=(0,n.useState)(""),[d,g]=(0,n.useState)("t-idle"),[v,j]=(0,n.useState)("p-t-idle"),N=(0,n.useRef)(null),Z=(0,n.useRef)(null),E=(0,n.useRef)(null),[I,T]=(0,n.useState)(!1),[C,Y]=(0,n.useState)(0);x(()=>{k()},500,[s]);let k=async()=>{e(await h(s))};(0,n.useEffect)(()=>{if("t-start"===d){let t=setTimeout(()=>{g("t-end"),j("p-t-end"),_.ZP.to(N.current,{duration:2,y:-45}),B()},3e3),e=_.ZP.fromTo(Z.current,{x:-5},{duration:.1,x:5,repeat:-1,yoyo:!0});return()=>{clearTimeout(t),e.kill()}}},[d]),(0,n.useEffect)(()=>{I&&(0,m.Z)({particleCount:100,spread:70,origin:{y:.6}})},[I]),(0,n.useEffect)(()=>{if("t-end"===d){(0,m.Z)({particleCount:200,spread:160,origin:{y:.6}}),r(),_.ZP.timeline().fromTo(E.current,{opacity:1},{opacity:1,duration:1}).to(E.current,{textContent:"You burnt ".concat(C," bread crumbs!"),duration:1});let t=[_.ZP.to(E.current,{rotation:"-5deg",duration:1,repeat:-1,yoyo:!0,ease:"power1.inOut"}),_.ZP.to(E.current,{rotation:"5deg",duration:1,repeat:-1,yoyo:!0,ease:"power1.inOut"}),_.ZP.to(E.current,{scale:1.1,duration:.5,repeat:-1,yoyo:!0,ease:"power1.inOut"}),_.ZP.to(E.current,{y:"+=10",duration:.5,repeat:-1,yoyo:!0,ease:"power1.inOut"}),_.ZP.to(E.current,{opacity:.5,duration:.5,repeat:-1,yoyo:!0,ease:"power1.inOut"})];return()=>{t.forEach(t=>t.kill())}}},[d,C]);let B=async()=>{try{let e={address:s,cant:t.cant+(Math.floor(200*Math.random())+1),last_burn_at:new Date().toISOString()};Y(e.cant),T(!0),t.isBurned||(""===t.address?await p(e):await f(e),await k())}catch(t){console.error(t),b.default.error("Error saving score")}};return(0,a.jsx)("div",{className:o().game_container,children:(0,a.jsxs)("div",{className:"flex flex-col items-center mx-auto w-full h-screen p-6 relative max-w-[1000px] gap-4 overflow-auto",children:[(0,a.jsxs)("h1",{className:"".concat(i().title," text-6xl md:text-8xl  "),children:[(0,a.jsx)("span",{children:"REDEEM"}),(0,a.jsx)("span",{children:"CRUMBLES"})]}),(0,a.jsx)("h3",{className:"text-center  text-primary my-4 text-2xl",ref:E,children:"Toast me baby!!! \uD83C\uDF5E"}),(0,a.jsxs)("div",{className:"relative flex flex-col justify-center h-full items-center gap-2",children:[I&&(0,a.jsx)("canvas",{id:"confetti-canvas"}),(0,a.jsxs)("div",{ref:Z,className:"relative z-10 flex justify-center",children:[(0,a.jsx)("img",{src:"/assets-burntoast/".concat(d,".png"),alt:"Toaster",className:"toaster w-64 z-10"}),(0,a.jsx)("img",{ref:N,src:"/assets-burntoast/".concat(v,".png"),alt:"Bread",className:"bread absolute bottom-36 w-32"})]}),(0,a.jsx)("input",{className:"text-primary p-2 rounded-lg h-12 transform transition duration-150  ease-in-out w-64 hover:scale-105",type:"text",id:"wallet",name:"wallet",placeholder:"Wallet address",required:!0,onChange:t=>{(0,y.Q)(t.target.value)?u(t.target.value):b.default.error("Invalid wallet address")}}),""!==s&&(0,a.jsxs)("span",{className:"text-white",children:["Bread crumbs : ",t.cant]}),""!==t.last_burn_at&&(0,a.jsxs)("span",{className:"text-white",children:["Next burn available in: ",(()=>{if(""!==t.last_burn_at&&t.isBurned){let e=new Date(t.last_burn_at),r=864e5-(new Date().getTime()-e.getTime());return"".concat(Math.floor(r/36e5),"h ").concat(Math.floor(r%36e5/6e4),"m ").concat(Math.floor(r%6e4/1e3),"s")}return"Now!"})()]}),(0,a.jsx)(l.Z,{onClick:()=>{""===s||t.isBurned?b.default.error("Please enter a wallet address"):(g("t-start"),j("p-t-idle"),_.ZP.to(N.current,{duration:2,y:100}))},disabled:"t-start"===d||t.isBurned,children:"Redeem!"})]})]})})}},1522:function(t,e,r){"use strict";var a=r(8754);r(2123),e.Z=t=>{let{onClick:e,children:r,disabled:n}=t;return(0,a.jsx)("button",{className:"bg-primary border-white border-4 rounded-xl text-2xl  p-4 w-44 text-white transform transition duration-150 ease-in-out hover:bg-yellow hover:scale-105 ",onClick:e,disabled:n,children:r})}},5987:function(t,e,r){"use strict";var a=r(2123);e.Z=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[r,n]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let r=new Audio(t);return r.volume=e,n(r),()=>{r.pause(),r.currentTime=0}},[t,e]),{play:async()=>await (null==r?void 0:r.play()),pause:()=>null==r?void 0:r.pause(),stop:()=>{null==r||r.pause(),null!=r&&(r.currentTime=0)}}}},1786:function(t,e,r){"use strict";r.d(e,{Q:function(){return n}});var a=r(4642);let n=t=>{let e;try{return e=new a.nh(t),a.nh.isOnCurve(e.toBytes())}catch(t){return!1}}},4295:function(t,e,r){"use strict";r.d(e,{e:function(){return n}});var a=r(2242);let n=()=>(0,a.AY)("https://xcnojfccikqoqevmraho.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inhjbm9qZmNjaWtxb3Fldm1yYWhvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTE3MTk3NDUsImV4cCI6MjAyNzI5NTc0NX0.ZzgsRR1PQ56qTYuzr97T_RkP8YZ2_sgwu68hKnJ4K7E")},511:function(t,e,r){"use strict";var a=r(4295),n=r(2123),s=r(4625);e.Z=()=>{let[t,e]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let t=null;try{t=(0,a.e)(),e(t)}catch(t){s.default.error("Failed to initialize Burntoast  client. Contact the developer for more information."),console.error("Failed to initialize Burntoast  client. Contact the developer for more information.")}},[]),t}},7275:function(t){t.exports={title:"start-screen_title__suY7P",logo:"start-screen_logo__Qu2ae"}},397:function(t){t.exports={toaster:"punchtoast_toaster__6_QZA",game_container:"punchtoast_game_container__s_d9w",button:"punchtoast_button__Yhhdg",celebration:"punchtoast_celebration__CAhDJ",word:"punchtoast_word__w2vG6",char:"punchtoast_char__G5HY_",jump:"punchtoast_jump__TMcSj",countdown_number:"punchtoast_countdown_number__9aygh",icon_button:"punchtoast_icon_button__gbUVi",mute_button:"punchtoast_mute_button__ufyh4",mallet:"punchtoast_mallet__Gl3iu",end_button:"punchtoast_end_button__vG8dt",game_info:"punchtoast_game_info__IkiMu",info_screen:"punchtoast_info_screen__YwwI_",results:"punchtoast_results__iYzRR",icon:"punchtoast_icon___J7sW",sr_only:"punchtoast_sr_only__YbiYi",info__text:"punchtoast_info__text__7d02b","boring-text":"punchtoast_boring-text__2Yt07",footer:"punchtoast_footer__NNTVw","footer-container":"punchtoast_footer-container__kQFMc",github:"punchtoast_github__wlGfD",website:"punchtoast_website__YJssO"}}},function(t){t.O(0,[635,364,625,299,146,672,744],function(){return t(t.s=7330)}),_N_E=t.O()}]);